SkyUECountries = [
  "RU-sky", //Russie
  "UA-sky", //Ukraine
  "FR-sky", //France
  "ES-sky", //Espagne
  "SE-sky", //Suede
  "KZ-sky", //Kazakhstan
  "DE-sky", //Allemagne
  "FI-sky", //Finlande
  "NO-sky", //Norvege
  "PL-sky", //Pologne
  "IT-sky", //Italie
  "UK-sky", //Royaume-Uni
  "RO-sky", //Roumanie
  "BY-sky", //Bielorussie
  "GR-sky", //Grece
  "BG-sky", //Bulgarie
  "IS-sky", //Islande
  "HU-sky", //Hongrie
  "PT-sky", //Portugal
  "RS-sky", //Serbie
  "AT-sky", //Autriche
  "CZ-sky", //Republique Tcheque
  "IE-sky", //Irlande
  "LT-sky", //Lituanie
  "LV-sky", //Lettonie
  "HR-sky", //Croatie
  "BA-sky", //Bosnie-Herzegovine
  "SK-sky", //Slovaquie
  "EE-sky", //Estonie
  "DK-sky", //Danemark
  "NL-sky", //Pays-Bas
  "CH-sky", //Suisse
  "MD-sky", //Moldavie
  "BE-sky", //Belgique
  "AL-sky", //Albanie
  "SKG-sky", //Macedoine
  "TR-sky", //Turquie
  "SI-sky", //Slovenie
  "ME-sky", //Montenegro
  "LUX-sky", //Luxembourg
  "AD-sky", //Andorre
  "MLA-sky", //Malte
  "LI-sky", //Liechenstein
  "SX-sky", //Saint-Martin
  "MC-sky", //Monaco
  "VA-sky", //Vatican
  "AM-sky", //Armenie
  "CY-sky", //Chypre
  "AZ-sky", //Azerbaidjan
  "GE-sky" //Georgie
]

UECountries = {
  "RU-sky": "Russie",
  "UA-sky": "Ukraine",
  "FR-sky": "France",
  "ES-sky": "Espagne",
  "SE-sky": "Suede",
  "KZ-sky": "Kazakhstan",
  "DE-sky": "Allemagne",
  "FI-sky": "Finlande",
  "NO-sky": "Norvege",
  "PL-sky": "Pologne",
  "IT-sky": "Italie",
  "UK-sky": "Royaume-Uni",
  "RO-sky": "Roumanie",
  "BY-sky": "Bielorussie",
  "GR-sky": "Grece",
  "BG-sky": "Bulgarie",
  "IS-sky": "Islande",
  "HU-sky": "Hongrie",
  "PT-sky": "Portugal",
  "RS-sky": "Serbie",
  "AT-sky": "Autriche",
  "CZ-sky": "Republique Tcheque",
  "IE-sky": "Irlande",
  "LT-sky": "Lituanie",
  "LV-sky": "Lettonie",
  "HR-sky": "Croatie",
  "BA-sky": "Bosnie-Herzegovine",
  "SK-sky": "Slovaquie",
  "EE-sky": "Estonie",
  "DK-sky": "Danemark",
  "NL-sky": "Pays-Bas",
  "CH-sky": "Suisse",
  "MD-sky": "Moldavie",
  "BE-sky": "Belgique",
  "AL-sky": "Albanie",
  "SKG-sky": "Macedoine",
  "TR-sky": "Turquie",
  "SI-sky": "Slovenie",
  "ME-sky": "Montenegro",
  "LUX-sky": "Luxembourg",
  "AD-sky": "Andorre",
  "MLA-sky": "Malte",
  "LI-sky": "Liechenstein",
  "SX-sky": "Saint-Martin",
  "MC-sky": "Monaco",
  "VA-sky": "Vatican",
  "AM-sky": "Armenie",
  "CY-sky": "Chypre",
  "AZ-sky": "Azerbaidjan",
  "GE-sky": "Georgie"
}

countryPictures = {
  "RU-sky": {pictureUrl: "https://images.unsplash.com/photo-1478095062770-b2e8f2af3ed1?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Artem Sapegin", authorLink: "https://unsplash.com/@sapegin"},
  "UA-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/10/27/15/48/winter-1775503_960_720.jpg", authorName: "Skeeze", authorLink: "https://pixabay.com/fr/users/skeeze-272447/"},
  "FR-sky": {pictureUrl: "https://images.unsplash.com/photo-1470470558828-e00ad9dbbc13?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Bruno Abatti", authorLink: "https://unsplash.com/@brunoabatti"},
  "ES-sky": {pictureUrl: "https://images.unsplash.com/photo-1464285465579-b6eb46054b63?dpr=1&auto=format&fit=crop&w=1500&h=994&q=80&cs=tinysrgb&crop=", authorName: "Hugo Villegas", authorLink: "https://unsplash.com/@gohu"},
  "SE-sky": {pictureUrl: "https://images.unsplash.com/photo-1476891823369-1ce737040929?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Etienne Pauthenet", authorLink: "https://unsplash.com/@gohu"},
  "KZ-sky": {pictureUrl: "https://images.unsplash.com/photo-1453793344096-9c52dc0107fb?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Nessi Gileva", authorLink: "https://unsplash.com/@red_fox"},
  "DE-sky": {pictureUrl: "https://images.unsplash.com/photo-1468914793027-6ecfb73cb1ed?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Koman Kraft", authorLink: "https://unsplash.com/@romankraft"},
  "FI-sky": {pictureUrl: "https://images.unsplash.com/photo-1472064146360-66a6ffda8552?dpr=1&auto=format&fit=crop&w=1500&h=1065&q=80&cs=tinysrgb&crop=", authorName: "Tommi Saltiola", authorLink: "https://unsplash.com/@7ommi"},
  "NO-sky": {pictureUrl: "https://images.unsplash.com/photo-1469394576569-858815b13427?dpr=1&auto=format&fit=crop&w=1500&h=884&q=80&cs=tinysrgb&crop=", authorName: "Steinar La Engeland", authorLink: "https://unsplash.com/@steinart"},
  "PL-sky": {pictureUrl: "https://images.unsplash.com/photo-1445855743215-296f71d4b49c?dpr=2&auto=format&fit=crop&w=767&h=511&q=80&cs=tinysrgb&crop=", authorName: "Lukasz Szmigiel", authorLink: "https://unsplash.com/@szmigieldesign"},
  "IT-sky": {pictureUrl: "https://images.unsplash.com/photo-1447722939828-559fee94b1f5?dpr=1&auto=format&fit=crop&w=1500&h=994&q=80&cs=tinysrgb&crop=", authorName: "Mariya Georgieva", authorLink: "https://unsplash.com/@mariyageorgieva"},
  "UK-sky": {pictureUrl: "https://images.unsplash.com/photo-1456490585048-f4a7348766f7?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Will van Wingerden", authorLink: "https://unsplash.com/@willvanw"},
  "RO-sky": {pictureUrl: "https://images.unsplash.com/photo-1471940393269-df205607fb2a?dpr=2&auto=format&fit=crop&w=767&h=512&q=80&cs=tinysrgb&crop=", authorName: "Larisa Birta", authorLink: "https://unsplash.com/@larisabirta"},
  "BY-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/05/24/19/24/evening-1413081_960_720.jpg", authorName: "RomanS13", authorLink: "https://pixabay.com/fr/users/RomanS13-2584184/"},
  "GR-sky": {pictureUrl: "https://images.unsplash.com/uploads/14133108275749c3ade5f/3817c7c9?dpr=1&auto=format&fit=crop&w=1500&h=1007&q=80&cs=tinysrgb&crop=", authorName: "Sarah Eskandarpour", authorLink: "https://unsplash.com/@eskands"},
  "BG-sky": {pictureUrl: "https://images.unsplash.com/photo-1414187976819-32a4deaae820?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Deniz Fuchidzhiev", authorLink: "https://unsplash.com/@websygen"},
  "IS-sky": {pictureUrl: "https://images.unsplash.com/photo-1445127040028-b1bdb9acd16e?dpr=1&auto=format&fit=crop&w=1500&h=997&q=80&cs=tinysrgb&crop=", authorName: "Cosmic Timetraveler", authorLink: "https://unsplash.com/@atw"},
  "HU-sky": {pictureUrl: "https://images.unsplash.com/photo-1478191696214-796b65712719?dpr=1&auto=format&fit=crop&w=1500&h=1001&q=80&cs=tinysrgb&crop=", authorName: "Daniel Olah", authorLink: "https://unsplash.com/@danesduet10"},
  "PT-sky": {pictureUrl: "https://images.unsplash.com/photo-1477120292453-1cad512c7c44?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Jason Briscoe", authorLink: "https://unsplash.com/@jbriscoe"},
  "RS-sky": {pictureUrl: "https://images.unsplash.com/photo-1443512522690-9d26aecb7b3f?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Marijana Petrovic", authorLink: "https://unsplash.com/@danuberiverchild"},
  "AT-sky": {pictureUrl: "https://images.unsplash.com/photo-1443512522690-9d26aecb7b3f?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Jace Grandinetti", authorLink: "https://unsplash.com/@jacegrandinetti"},
  "CZ-sky": {pictureUrl: "https://images.unsplash.com/photo-1465050151035-ef0089c30a65?dpr=1&auto=format&fit=crop&w=1500&h=995&q=80&cs=tinysrgb&crop=", authorName: "Daniel Mal√Ω", authorLink: "https://unsplash.com/@dmaly"},
  "IE-sky": {pictureUrl: "https://images.unsplash.com/photo-1465411261564-1308080c8010?dpr=1&auto=format&fit=crop&w=1500&h=997&q=80&cs=tinysrgb&crop=", authorName: "Elias Ehmann", authorLink: "https://unsplash.com/@greene"},
  "LT-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/03/04/14/50/beautiful-1236161_960_720.jpg", authorName: "Skaistyte", authorLink: "https://pixabay.com/fr/users/skaistyte-1192854/"},
  "LV-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/05/08/23/41/riga-1380164_960_720.jpg", authorName: "agdar", authorLink: "https://pixabay.com/fr/users/agdar-2532998/"},
  "HR-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/05/08/23/41/riga-1380164_960_720.jpg", authorName: "Dominik Lange", authorLink: "https://unsplash.com/@the_real_napster"},
  "BA-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2015/12/14/01/48/mostar-1091975_960_720.jpg", authorName: "921creatives", authorLink: "https://pixabay.com/fr/users/921creatives-1769235/"},
  "SK-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2015/12/14/01/48/mostar-1091975_960_720.jpg", authorName: "katkaZV", authorLink: "https://pixabay.com/fr/users/katkaZV-3116582/"},
  "EE-sky": {pictureUrl: "https://images.unsplash.com/photo-1465802954450-8fcef6708c35?dpr=1&auto=format&fit=crop&w=1500&h=1001&q=80&cs=tinysrgb&crop=", authorName: "Ivars Krutainis", authorLink: "https://unsplash.com/@krutainis"},
  "DK-sky": {pictureUrl: "https://images.unsplash.com/photo-1465802954450-8fcef6708c35?dpr=1&auto=format&fit=crop&w=1500&h=1001&q=80&cs=tinysrgb&crop=", authorName: "Julien Widmer", authorLink: "https://unsplash.com/@qasph"},
  "NL-sky": {pictureUrl: "https://images.unsplash.com/photo-1465802954450-8fcef6708c35?dpr=1&auto=format&fit=crop&w=1500&h=1001&q=80&cs=tinysrgb&crop=", authorName: "Owen Williams", authorLink: "https://unsplash.com/@owenw"},
  "CH-sky": {pictureUrl: "https://images.unsplash.com/photo-1462651567147-aa679fd1cfaf?dpr=1&auto=format&fit=crop&w=1500&h=1001&q=80&cs=tinysrgb&crop=", authorName: "Dino Reichmuth", authorLink: "https://unsplash.com/@dinoreichmuth"},
  "MD-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/04/25/13/11/moldavia-1351825_960_720.jpg", authorName: "olafpictureUrls", authorLink: "https://pixabay.com/fr/users/olafpictureUrls-2427999/"},
  "BE-sky": {pictureUrl: "https://images.unsplash.com/photo-1464793279436-9b124684bd85?dpr=1&auto=format&fit=crop&w=1500&h=844&q=80&cs=tinysrgb&crop=", authorName: "https://images.unsplash.com/photo-1464793279436-9b124684bd85?dpr=1&auto=format&fit=crop&w=1500&h=844&q=80&cs=tinysrgb&crop=", authorLink: "https://unsplash.com/@jonatanmoerman"},
  "AL-sky": {pictureUrl: "https://images.unsplash.com/photo-1475079142766-5db8ca23c50e?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Arteida MjESHTRI", authorLink: "https://unsplash.com/@arteidamjeshtri"},
  "SKG-sky": {pictureUrl: "https://images.unsplash.com/photo-1470293186624-d1901c45515b?dpr=1&auto=format&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb&crop=", authorName: "Nemanja Sekulic", authorLink: "https://unsplash.com/@nemanjasekulic"},
  "TR-sky": {pictureUrl: "https://images.unsplash.com/photo-1462364513050-bf030947cce2?dpr=1&auto=format&fit=crop&w=1500&h=864&q=80&cs=tinysrgb&crop=", authorName: "Mahir Uysal", authorLink: "https://unsplash.com/@mahiruysal"},
  "SI-sky": {pictureUrl: "https://images.unsplash.com/photo-1478088913771-e3a36f50bb63?dpr=1&auto=format&fit=crop&w=1500&h=947&q=80&cs=tinysrgb&crop=", authorName: "Neven Krcmarek", authorLink: "https://unsplash.com/@nevenkrcmarek"},
  "ME-sky": {pictureUrl: "https://images.unsplash.com/photo-1469264829440-117e4c3453ec?dpr=1&auto=format&fit=crop&w=1500&h=803&q=80&cs=tinysrgb&crop=", authorName: "Srdjan Ivankovic", authorLink: "https://unsplash.com/@s4ke"},
  "LUX-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/07/24/12/50/rock-1538320_960_720.jpg", authorName: "MrsBrown", authorLink: "https://pixabay.com/fr/users/MrsBrown-692504/"},
  "AD-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/09/07/16/13/andorra-1651926_960_720.jpg", authorName: "TULAS", authorLink: "https://pixabay.com/fr/users/TULAS-2393410/"},
  "MLA-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/04/30/12/37/malta-1362852_960_720.jpg", authorName: "gln", authorLink: "https://pixabay.com/fr/users/gln-1940142/"},
  "LI-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/01/24/14/19/castle-liechtenstein-1158949_960_720.jpg", authorName: "sunflair", authorLink: "https://pixabay.com/fr/users/sunflair-1942787/"},
  "SX-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2016/01/24/14/19/castle-liechtenstein-1158949_960_720.jpg", authorName: "shuvohabib2", authorLink: "https://pixabay.com/fr/users/shuvohabib2-1144666/"},
  "MC-sky": {pictureUrl: "https://images.unsplash.com/photo-1444526423470-f5a414419a23?dpr=1&auto=format&fit=crop&w=1500&h=1001&q=80&cs=tinysrgb&crop=", authorName: "Jeremy Goldberg", authorLink: "https://unsplash.com/@jeremy"},
  "VA-sky": {pictureUrl: "https://images.unsplash.com/photo-1445153758740-1a8af538ab6a?dpr=1&auto=format&fit=crop&w=1500&h=1125&q=80&cs=tinysrgb&crop=", authorName: "Jan Tielens", authorLink: "https://unsplash.com/@jtlns"},
  "AM-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2014/04/17/23/36/san-lazzaro-326931_960_720.jpg", authorName: "stepanianhasmik", authorLink: "https://pixabay.com/fr/users/stepanianhasmik-227390/"},
  "CY-sky": {pictureUrl: "https://cdn.pixabay.com/photo/2014/04/17/23/36/san-lazzaro-326931_960_720.jpg", authorName: "Mike Yukhtenko", authorLink: "https://unsplash.com/@yamaicle"},
  "AZ-sky": {pictureUrl: "https://images.unsplash.com/photo-1467560433578-7b5198ea9cbf?dpr=1&auto=format&fit=crop&w=1500&h=844&q=80&cs=tinysrgb&crop=", authorName: "Teymur Gahramanov", authorLink: "https://unsplash.com/@gahramanovteymur"},
  "GE-sky": {pictureUrl: "https://images.unsplash.com/photo-1444418582978-8c887a9d1997?dpr=1&auto=format&fit=crop&w=1500&h=1001&q=80&cs=tinysrgb&crop=", authorName: "Jordan Sanchez", authorLink: "https://unsplash.com/@jordaneil"}
}

SkyScannerApiKey = "uz497893624968959685836267896543"

var Bottleneck = require("bottleneck");
limiter = new Bottleneck(1, 100);
limiterPollSession = new Bottleneck(5, 100);

http = require("http")

debug = require('debug')('worker');

mongoose = require('mongoose');
mongoose.connect('mongodb://localhost/app-weekend')

schedule = require('node-schedule');

TOTALDEALS = 3

MAXPASSENGERS = 4
